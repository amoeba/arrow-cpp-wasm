<div>
  <label for="file_input">Choose file:</label>
  <input id="file_input" type="file" />
</div>

<script src="./a.out.js"></script>
<script>
  Module.onRuntimeInitialized = async () => {
    console.log("onRuntimeInitialized called");
  };

  document.getElementById('file_input').addEventListener('change', function (e) {
    if (!e.target.files[0]) {
      console.log("error, files array is empty...", e.target.files)

      return;
    }

    var file = e.target.files[0];

    var fr = new FileReader()

    fr.onload = function () {
      var data = new Uint8Array(fr.result);

      let filename = 'tmp.arrow';
      let stream = FS.open(filename, 'w+');
      FS.write(stream, data, 0, data.length, 0);
      FS.close(stream);

      console.log("InspectFile:", Module.InspectFile(filename));

      e.target.value = '';
    };

    fr.readAsArrayBuffer(file);
  });
</script>
